<div class="board-container">

<h1 class="board-heading">NOTIFICATIONS</h1>


<div style="margin-bottom: 1rem;">
  <p>
    <strong>Email Notifications:</strong>
    <% if current_user.email_notifications? %>
      <span style="color: green;">Enabled ✅</span>
    <% else %>
      <span style="color: red;">Disabled ❌</span>
    <% end %>
  </p>

  <%= form_with model: current_user, url: toggle_email_notifications_path, method: :patch, local: true do |f| %>
    <label>
      <%= f.check_box :email_notifications, checked: current_user.email_notifications %>
      Receive email notifications
    </label>
    <%= f.submit "Update", class: "btn btn-sm btn-primary" %>
  <% end %>
</div>


<% if @notifications.any? %>
  <% @unread_count = 2 %>
  <ul class="notifications-list">
    <% @notifications.each_with_index do |notification, index| %>
      <li class="notification-item <%= 'unread' if index < @unread_count %>">
        <div class="notification-header">
          <span class="notification-time">
            <%= notification.created_at.strftime("%b %d, %Y %H:%M") %>
          </span>
        </div>
        <div class="notification-body">
          <%= link_to notification.message, notification.url, class: "notification-link" %>
        </div>
      </li>

    <% end %>
  </ul>
<% else %>
  <p class="no-notifications">No new notifications.</p>
<% end %>

</div>