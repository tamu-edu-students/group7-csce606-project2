<p style="color: green"><%= notice %></p>

<% content_for :title, @project.title %>

<h1><%= @project.title %></h1>
<p>
      <strong>Author:</strong> 
      <span><%= @project.author.name || "Unknown Author" %></span>
    </p>
<p><strong>Description:</strong></p>
<p><%= @project.description %></p>

<p><strong>Roles Available:</strong> <%= @project.role_cnt %></p>
<p><strong>Status:</strong> <%= @project.status.capitalize %></p>

<p><strong>Project Owner:</strong> <%= @project.author.email if @project.author %></p>

<hr>

<%# ----- Actions for project creator ----- %>
<% if user_signed_in? && current_user == @project.author %>
  <% if @project.open? %>
    <%= button_to "Close Listing", close_project_path(@project),
                  method: :patch,
                  class: "btn btn-warning" %>
  <% else %>
    <%= button_to "Reopen Listing", reopen_project_path(@project),
                  method: :patch,
                  class: "btn btn-success" %>
  <% end %>

  <p>
    <%= link_to "Edit", edit_project_path(@project), class: "btn btn-secondary" %> |
    <%= button_to "Delete this project", @project, method: :delete, data: { turbo_confirm: 'Are you sure?' }, class: "btn btn-danger" %>
  </p>
<% elsif user_signed_in? %>
  <% if @project.open? %>
    <%= button_to "Apply to Join", "#", class: "btn btn-primary", disabled: true %>
    <p><small>(“Apply” will be implemented later.)</small></p>
  <% else %>
    <p><em>This project is closed for new collaborators.</em></p>
  <% end %>
<% else %>
  <p><%= link_to "Log in", new_user_session_path %> to apply or create your own projects.</p>
<% end %>

<hr>
<!--
<div class="action-links">
  <% if @project.author == current_user %>
    <%= link_to "Edit this project", edit_project_path(@project), class: "btn btn-secondary" %>
    <%= button_to "Delete this project", @project, method: :delete, data: { turbo_confirm: 'Are you sure?' }, class: "btn btn-danger" %>
  <% end %>
</div>
-->
<%= link_to "Back to Projects", projects_path, class: "btn btn-outline-primary" %>
