<div class="board-container">

<p style="color: green"><%= notice %></p>
<p style="color: red"><%= alert %></p>

<% content_for :title, "Bulletin posts" %>


<h1 class="board-heading">BULLETIN BOARD</h1>
<p class="board-subheading">View posts in your community.</p>

<%# Local Search Form â€” searches only BulletinPosts %>
<% if user_signed_in? %>
  <div class="board-search-section">
  <%= form_with(url: bulletin_posts_path, method: :get, local: true, class: "board-search-form") do |form| %>
    <div>
      <%= form.text_field :query, value: params[:query], placeholder: "Search bulletin posts...", class: "board-search-input"  %>
      <%= form.submit "Search", class: "board-search-button" %>
    </div>
  <% end %>
  <%= link_to "Create Post", new_bulletin_post_path, class: "board-create-btn"  %>
    </div>
  <% else %>
    <p class="board-login-prompt">
      <%= link_to "Log in", new_user_session_path, class: "board-login-link" %> to search or create teaching offers.
    </p>
<% end %>

<%# Show search results if query present %>
<% if params[:query].present? %>
  <h2 class="board-section-title">Search results for: "<%= params[:query] %>"</h2>
<% else %>
    <h2 class="board-section-title">All Bulletin Posts</h2>
<% end %>

<% if @bulletin_posts.any? %>
  <ul class="board-offer-grid">
    <% @bulletin_posts.each do |post| %>
      <%= render partial: "bulletin_post", locals: { post: post } %>
    <% end %>
  </ul>
<% else %>
  <p class="board-empty-message">No teaching offers found.</p>
<% end %>
</div>